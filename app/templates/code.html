<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Runner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 30px auto;
            padding: 20px;
            background: #f9f9f9;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }
        select, textarea, button {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            box-sizing: border-box;
        }
        textarea {
            height: 200px;
            font-family: monospace;
            font-size: 14px;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
            margin-top: 15px;
        }
        button:hover {
            background: #45a049;
        }
        #output {
            margin-top: 20px;
            padding: 15px;
            background: #fff;
            border: 1px solid #ddd;
            white-space: pre-wrap;
            font-family: monospace;
            min-height: 50px;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>üíª –ó–∞–ø—É—Å–∫ –∫–æ–¥–∞ –æ–Ω–ª–∞–π–Ω</h1>

    <label for="language">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:</label>
    <select id="language">
        <option value="python">Python</option>
        <option value="javascript">JavaScript</option>
        <option value="java">Java</option>
        <option value="cpp">C++</option>
    </select>

    <label for="code">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥:</label>
    <textarea id="codeArea" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: print('Hello, World!')">print("Hello, World!")</textarea>

    <button onclick="runCode()">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–¥</button>

    <div id="output"></div>

    <script>
        async function runCode() {
            const code = document.getElementById('codeArea').value;
            const language = document.getElementById('language').value;
            const outputDiv = document.getElementById('output');

            outputDiv.textContent = '–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...';
            outputDiv.className = '';

            try {
                const response = await fetch('/api/run-code', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ code, language })
                });

                const data = await response.json();

                if (response.ok) {
                    outputDiv.textContent = data.output || '(–ù–µ—Ç –≤—ã–≤–æ–¥–∞)';
                } else {
                    outputDiv.textContent = '‚ùå –û—à–∏–±–∫–∞: ' + (data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
                    outputDiv.className = 'error';
                }
            } catch (err) {
                outputDiv.textContent = '‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + err.message;
                outputDiv.className = 'error';
            }
        }
    </script>
</body>
</html>